<!DOCTYPE html>
<html lang="fr">

<head>
	<title>Wacdo Compostion de la commande</title>
	<meta charset="UTF-8" />
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
	<!-- Liaison au fichier css de Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<link rel="stylesheet" href="css/default.css">
	<link rel="stylesheet" href="css/order.css" >
	<link rel="stylesheet" href="css/category.css" >
	<link rel="stylesheet" href="css/product.css">
	<link rel="stylesheet" href="css/modal.css">
	<link rel="stylesheet" href="css/choix.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script>
		function loadEvent(){
			 
		}
	</script>
</head>

<body>
	<main class="container-fluid">
		<div class="row">
			<div class="col-lg-9">
				<nav class="category-carousel">
					<div class="container">
						<div class="d-flex align-items-center">
							<button class="category-arrow" id="prevCategory" >
								<img src="img/images/fleche-slider.png" alt="fleche vers la gauche">
							</button>
							<div class="category-scroll flex-grow-1 mx-3" id="categoryScroll">
								<div class="d-flex" id="categoryContainer">
									<!-- chargement des catégories par la fonction js displayCategories-->
								</div>
							</div>
							<button class="category-arrow-right" id="nextCategory">
								<img src="img/images/fleche-slider.png" alt="fleche vers la droite">
							</button>
						</div>
					</div>
				</nav>
				
				<section class="container products-container ">
					<h1 class="category-title" id="categoryTitle">Nos menus</h1>
					<p class="category-description" id="categoryDescription">Un sandwich, une friture ou une salade et une
						boisson</p>
					<div class="row" id="productsContainer">
						<!-- chargement des produits d'une catégorie par la fonction js displayProducts- sollicitée à chaque click sur une catégorie -->
					</div>
				</section>
			</div>
			<div class="col-lg-3 bg-secondary-subtle top-0 vh-100" id="order">
				<div class="order-panel">
					<div class="row">
						<img src="img/images/logo.png" class="img-fluid w-25 mx-auto mt-2" alt="logo wacdo">
					</div>
					<div class="row w-100  mx-2 border-2  border-bottom border-dark" id="order-header">
						<div class="col-2 float-md-start" style="width: 75%;">
							<p class="text-break my-2" style="font-size:x-small;"> Commande numéro</br> <span id="labelCommande">Sur piazza : </span><span
									class="fw-bold" id="orderPlace">326</span></p>
						</div>
						<div class="col-1 float-md-end	">
							<p class="fs-1 my-2" id="orderNumber">72</p>
						</div>
					</div>
					<div class="order-items" id="orderItems">
						<!-- affichage de la commande en cours avec la fonction displayOrder -->
						
					</div>
					<div class="row w-100  mx-2 border-2  border-top border-dark" id="order-footer">
						<div class="order-total">
							<span class="order-total-label">TOTAL (ttc)</span>
							<span class="order-total-amount" id="orderTotal">0,00€</span>
						</div>
						<div class="order-buttons mb-3">
							<button class="btn-abandon"id="btnAbandonOrder">Abandon</button>
							<button class="btn-payer" id="btnPayerOrder">Payer</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
	<!-- fenêtres modales-->

<!-- choix menu maxi -->
 <div class="modal fade modal-xl" id="modalChoixMaxi" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="modalChoixMaxiLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-end">
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					<p></p>
			    </div>
				<p class="h3 mt-5">Une grosse faim ?</p>
				<p>Menu <span id="nomMenu1">maxi Best Of</span> comprend un sandwich, une grande frite et une boisson 50cl</p>
				
				<div class="row justify-content-center ">
					<div class="" id="choixMaxiOui" >
						<div class="row w-75 mx-auto align-middle"> 
                            <img  id="img-menu1" src="img/categories/menus.png" alt="image menu taille max " class="">
						</div>
                        <div class="choix-label"> 
                            Menu Maxi Best Of
                        </div>  
					</div>
					<div class="" id="choixMaxiNon">
						<div class="row w-75 h-auto mx-auto align-middle"> 
                            <img  id="img-menu2" src="img/categories/menus.png" alt="image menu taille max " class="">
                        </div>  
                        <div class="choix-label"> 
                            Menu Best Of
                        </div> 
					</div>
				</div>
				<div class="row justify-content-center my-5">
					<div class="col-5 d-flex justify-content-center ">
						<button class="btn btn-warning" id="btnSuivantPatate"  aria-label="passage au choix des patates">
							Etape suivante
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>

	<!-- choix menu frites ou patatoes -->
 <div class="modal modal-xl" id="modalChoixPatate" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="modalChoixPatate" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-between">
				<button type="button"  id="btnRetourMaxi" class="btnRetour"  aria-label="Retour">Retour</button>
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					<p></p>
			    </div>
				<p class="h3 mt-5">Choisissez votre accompagnement</p>
				<p>Menu <span id="choixPatate">Frites, potatoes, la pomme de terre dans tous ses états</p>
				
				<div class="row justify-content-center my-5">
					<div class="" id="choixFrite" >
						<div class="row w-75 h-auto mx-auto align-middle"> 
                            <img  id="img-menu" src="img/frites/PETITE_FRITE.png" alt="image frites " class="modal-image-maxi">
                        </div>  
                        <div class="choix-label"> 
                           Frites
                        </div>  
					</div>
					<div class="" id="choixPotatoes" >
						<div class="row w-75 h-auto mx-auto align-middle"> 	
                            <img  id="img-menu" src="img/frites/GRANDE_POTATOES.png" alt="image potatoes " class="modal-image-potatoes">
                        </div>  
                        <div class="choix-label "> 
                            Potatoes
                        </div> 
					</div>
				</div>
				<div class="row justify-content-center my-5">
					<div class="col-5 d-flex justify-content-center ">
						<button class="btn btn-warning" id="btnSuivantBoisson"  aria-label="passage au choix des boissons">
							Etape suivante
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>
<!-- fenêtre modale pour le choix des boissons dans le menu -->
<div class="modal modal-xl" id="modalChoixBoisson" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="modalChoixBoisson" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-between">
				<button type="button" class="btnRetour" id="btnRetourPatate"  aria-label="Retour">Retour</button>
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					<p></p>
			    </div>
				<p class="h3 mt-5">Choisissez votre boisson</p>
				<p>Un soda, un jus de fruit ou un verre d'eau pour accompagner votre repas</p>
				
				<div class="category-carousel">
					<div class="container">
						<div class="d-flex align-items-center">
							<button class="category-arrow" id="prevDrink">
								<img src="img/images/fleche-slider.png" alt="fleche vers la gauche">
							</button>
							<div class="category-scroll flex-grow-1 mx-3" id="drinkScroll">
								<div class="d-flex" id="drinkContainer">
									<!-- chargement des boissons par la fonction js displayDrink-->
								</div>
							</div>
							<button class="category-arrow-right" id="nextDrink">
								<img src="img/images/fleche-slider.png" alt="fleche vers la droite">
							</button>
						</div>
					</div>
				</div>
				<div class="row justify-content-center my-5">
					<div class="col-5 d-flex justify-content-center ">
						<button class="btn btn-warning" id="btnSuivantSauce" aria-label="valider la commande">
							Etape Suivante
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>

<!-- fenêtre modale pour le choix des sauces dans le menu -->
<div class="modal modal-xl" id="modalChoixSauce" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="modalChoixBoisson" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-between">
				<button type="button" class="btnRetour" id="btnRetourBoisson"  aria-label="Retour">Retour</button>
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					<p></p>
			    </div>
				<p class="h3 mt-5">Choisissez votre sauce</p>
				<p>Possibilité de choisir une sauce pour accompagner votre repas</p>
				
				<div class="category-carousel">
					<div class="container">
						<div class="d-flex align-items-center">
							<button class="category-arrow" id="prevSauce">
								<img src="img/images/fleche-slider.png" alt="fleche vers la gauche">
							</button>
							<div class="category-scroll flex-grow-1 mx-3" id="sauceScroll">
								<div class="d-flex" id="sauceContainer">
									<!-- chargement des sauces par la fonction js displaySauce-->
								</div>
							</div>
							<button class="category-arrow-right" id="nextSauce">
								<img src="img/images/fleche-slider.png" alt="fleche vers la droite">
							</button>
						</div>
					</div>
				</div>
				<div class="row justify-content-center my-5">
					<div class="col-5 d-flex justify-content-center ">
						<button class="btn btn-warning" id="btnAjoutCommande" aria-label="valider la commande">
							Ajoutera le menu à ma commande
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>

<!-- choix taille boisson -->
 <div class="modal fade modal-xl" id="modalChoixTailleBoisson" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="modalChoixTailleBoisson" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-end">
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					<p></p>
			    </div>
				<p class="h3 mt-5">Une petite soif ?</p>
				<p>Choisissez la taille de votre boisson, + 0,50€ pour le format 50cl</p>
				
				<div class="row justify-content-center ">
					<div class="" id="choixGrand" >
						<div class="row w-75 mx-auto align-middle"> 
                            <img  id="imgChoixGrand"  alt="image boisson taille choixGrand " class="">
						</div>
                        <div  id="labelChoixGrand" class="choix-label"> 
                            50 Cl
                        </div>  
					</div>
					<div class="" id="choixPetit">
						<div class="row w-75 h-auto mx-auto align-middle"> 
							<p></p>
                            <img  id="imgChoixPetit"  alt="image boisson taille petit " class="w-75 h-auto mx-auto">
							<p></p>
                        </div>  
                        <div id="labelChoixPetit" class="choix-label"> 
                            30 Cl
                        </div> 
					</div>
				</div>
				<div class="row justify-content-center m-5">
					<div class="col-2 d-flex justify-content-around quantite-card">
						<button type="button" id="btnMoinsBoisson" class="btnPlusMoins" aria-label="bouton pour diminuer de 1 la quantité">-
						</button>
						<div id="nbBoisson" class="label-nbBoisson ">
							
						</div>
						<button type="button" id="btnPlusBoisson" class="btnPlusMoins" aria-label="bouton pour augmenter de 1 la quantité">+
						</button>
						
					</div>
				</div>
				<div class="row justify-content-center">
					<div class="col-5 d-flex justify-content-center ">
						<button type="button" class="btnAnnuler me-5" id="btnAnnulerBoisson"  aria-label="Retour">Annuler</button>
						<button class="btn btn-warning ms-5" id="btnValiderTailleBoisson"  aria-label="valider le choix de la taille des boissons">
							Ajouter à ma commande
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>
<!-- modal produit autre que boisson ou menu avec la possibiilité de choisir la quantité-->
 <div class="modal fade modal-xl" id="modalChoixProduitAutre" aria-hidden="true" data-bs-backdrop="static" aria-labelledby="possibilité d'augmenter la quantité et validation du produit" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
			<div class="container ">
				<div class="row justify-content-end">
				<button type="button" class="btn-close d-flex float-end" data-bs-dismiss="modal" aria-label="fermer fenêtre"></button>
					
			    </div>
				<p class="h3 mt-5">Validation de la commande</p>

				<p class="" id="nomProduitAutre">Possibilité de modifier la quantité avant de valider</p>
				
				<div class="row justify-content-center ">
					<div class="col-4 ms-2 choix-item-taille active" id="produitAutre" >
						<div class="row w-75 mx-auto align-middle"> 
                            <img  id="imgProduitAutre"  alt="image du produit choisi " class="">
						</div>
                        <div  id="labelProduitAutre" class="choix-label"> 
                    
                        </div>  
					</div>
				</div>
				<div class="row justify-content-center m-5">
					<div class="col-2 d-flex justify-content-around quantite-card">
						<button type="button" id="btnMoinsProduitAutre" class="btnPlusMoins" aria-label="bouton pour diminuer de 1 la quantité">-
						</button>
						<div id="nbProduitAutre" class="label-nbBoisson">
							
						</div>
						<button type="button" id="btnPlusProduitAutre" class="btnPlusMoins" aria-label="bouton pour augmenter de 1 la quantité">+
						</button>
						
					</div>
				</div>
				<div class="row justify-content-center">
					<div class="col-5 d-flex justify-content-center ">
						<button type="button" class="btnAnnuler me-5" id="btnAnnulerProduitAutre"  aria-label="Retour">Annuler</button>
						<button class="btn btn-warning ms-5" id="btnValiderProduitAutre"  aria-label="valider le choix">
							Ajouter à ma commande
						</button>
					</div>
				</div>
						
			</div>
           
          </div>
        </div>
    </div>
</div>
<!-- La liaison au script JS de Bootstrap -->
<script src="js/manage_events.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/category.js"></script>
<script src="js/product.js"></script>
<script src="js/drink.js"></script>
<script src="js/modal.js"></script>
<script src="js/order.js"></script>
<script src="js/sauce.js"></script>

<script>
	let categories = [];
	//let products = [];
	let currentCategory = "menus";
	let order = [];
    let orderCounter = 0;
	
	

	//chargement des données depuis les fichiers json
        async function loadData() {
            try {
                const categoriesResponse = await fetch('data/categories.json');
                if (!categoriesResponse.ok) {
                    throw new Error(`HTTP error! status: ${categoriesResponse.status}`);
                }
                categories = await categoriesResponse.json();
                
                const productsResponse = await fetch('data/produits.json');
                if (!productsResponse.ok) {
                    throw new Error(`HTTP error! status: ${productsResponse.status}`);
                }
                products = await productsResponse.json();
                
                displayCategories();
                displayProducts(currentCategory);
				displayOrder();
				
            } catch (error) {
                alert('Erreur lors du chargement des données. Assurez-vous que les fichiers categories.json et produits.json soient présents.');
            }
			
        }

		 // Initialize
        loadData();
		loadEvent();
</script>
</body>

</html>